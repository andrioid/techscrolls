---
import { getModerationPosts, getPublicPosts } from "@andrioid/atproto";

import Layout from "~astro/layout.astro";
import PageLayout from "~astro/page-layout.astro";
import { BskyPostList } from "~react/bluesky/post-list";
const { at } = Astro.locals;
const posts = await getModerationPosts(at);
const pmap = posts.map((p) => p.postId);
const bmap = await getPublicPosts(pmap);
---

<Layout>
  <PageLayout title="Untagged recent">
    <BskyPostList client:only="react" posts={bmap} mayClassify={true}>
      <div slot="fallback">Loading</div>
    </BskyPostList>
  </PageLayout>
</Layout>
